{% extends "base.j2" %}

{% block title %}{{ room_id }} - Synctron{% endblock %}

{% block js_head %}
{{ super() }}
<script src="https://www.youtube.com/iframe_api"></script>
{% endblock %}

{% block js_body %}
{{ super() }}
<script type="text/javascript">room_id = "{{ room_id }}"; wsapi_url = "{{ wsapi_url }}";</script>
<script type="text/javascript" src="/static/js/pages/player.js"></script>
{% endblock %}

{% block content %}

<div class="row">
	<div class="page-header"><h1>{{ room_id }} <small>Synctron</small></h1></div>
</div>

<div class="row">
	<div class="span8">
		<div id="player-div" class="well well-small center-contents">
			<div id="player" class="center"></div>
			<div class="btn-toolbar" id="room-toolbar">
				<div class="btn-group pull-left">
					<button class="btn disabled" id="addvideo-btn" title="Add a video to the playlist"><i class="icon-plus"></i></button>
					<button class="btn disabled" id="resync-btn" title="Re-synchronize the video"><i class="icon-refresh"></i></button>
				</div>

				<div class="btn-group">
					<button class="btn disabled" id="next-btn" title="Skip to the previous video"><i class="icon-fast-backward"></i></button>
					<button class="btn disabled" id="prev-btn" title="Skip to the next video"><i class="icon-fast-forward"></i></button>
				</div>

				<div class="btn-group pull-right">
					<button class="btn disabled dropdown-toggle" id="menu-btn" title="More options" data-toggle="dropdown">
						<i class="icon-wrench"></i>
					</button>
					<ul class="dropdown-menu">
						<li><a href="#" id="resync-all-btn"><i class="icon-refresh"></i> Re-sync Everyone</a></li>
						<li><a href="#" id="room-settings-btn"><i class="icon-cog"></i> Room Settings</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div id="add-video-popover" class="hide">
			<form name="videoform" id="videoform" action="javascript:void(0);" class="form-inline">
				<fieldset>
					<div class="input-append">
						<input type="text" name="video_id" id="video_id" placeholder="YouTube video URL or ID..." />

						<div class="btn-group">
							<button type="button" class="btn" id="btn-add-end" href="#">Add Video</button>
							<button type="button" class="btn dropdown-toggle" data-toggle="dropdown">
								<span class="caret"></span>
							</button>
							<ul class="dropdown-menu">
								<li><a id="menu-add-end" tabindex="-1" href="#">Add to the end of the playlist.</a></li>
								<li><a id="menu-add-next" tabindex="-1" href="#">Add after the currently playing video.</a></li>
							</ul>
						</div>
					</div>
				</fieldset>
			</form>
		</div>

		<table class="table table-hover table-condensed table-bordered playlist-table">
			<colgroup>
				<col width="48%" />
				<col width="24%" />
				<col width="11%" />
				<col width="17%" />
				<col width="24px" />
			</colgroup>

			<thead>
				<tr>
					<th class="expand">Title</th>
					<th>Author</th>
					<th>Time</th>
					<th>Video ID</th>
					<th>
				</tr>
			</thead>

			<tbody id="playlist-body">
			</tbody>
		</table>
	</div>

	<div class="span4">
		<table class="table table-hover table-condensed table-bordered">
			<thead>
				<tr><th>Users</th></tr>
			</thead>

			<tbody id="userlist-body">
			</tbody>
		</table>

		<div class="well">
			<p>Chat is not yet implemented.</p>
		</div>
	</div>
</div>

{% endblock %}
